# 网站内容提取工具集 - 使用指南

## 目录
- [快速开始](#快速开始)
- [功能特性](#功能特性)
- [启动方式](#启动方式)
- [功能说明](#功能说明)
- [常见问题](#常见问题)

---

## 快速开始

### 1. 安装依赖

```bash
pip3 install -r requirements.txt
```

### 2. 启动程序

```bash
# 方式 1: 直接运行 main.py
python3 main.py

# 方式 2: 使用命令行参数
python3 main.py --xhs-gui    # 直接启动小红书监控 GUI
python3 main.py --gui        # 启动通用网站提取器 GUI
python3 main.py --xhs-cli    # 启动小红书监控命令行
python3 main.py --account    # 启动账号管理
```

### 3. 选择功能

程序启动后会显示主菜单：

```
============================================================
网站内容提取工具集 v2.0
============================================================

请选择要使用的功能:

  1. 通用网站内容提取器 (GUI)
  2. 小红书监控器 (GUI)
  3. 小红书账号管理 (命令行)
  4. 小红书监控器 (命令行)
  5. 退出

============================================================

请输入选项 (1-5):
```

---

## 功能特性

### 🌐 通用网站内容提取器

**支持功能**:
- 多模态内容提取 (文本、图片)
- JavaScript 动态渲染页面
- 批量 URL 处理
- 数据导出 (JSON, CSV, Excel)

**适用场景**:
- 网页内容抓取
- 文章批量下载
- 数据采集分析

### 📕 小红书监控器

**支持功能**:
- 多账号管理和自动轮换
- AES-256 密码加密
- 自动登录和搜索
- 拟人化行为模拟
- 反检测保护
- 帖子和评论采集

**适用场景**:
- 品牌监控
- 舆情分析
- 潜在客户挖掘

### 🔐 账号管理器

**支持功能**:
- 添加/删除账号
- 查看账号状态
- 账号轮换配置
- 密码安全管理

---

## 启动方式

### 方式 1: 交互菜单 (默认)

```bash
python3 main.py
```

然后按照菜单提示选择功能。

### 方式 2: 命令行参数

```bash
# 启动小红书监控 GUI
python3 main.py --xhs-gui

# 启动通用网站提取器 GUI
python3 main.py --gui

# 启动小红书监控命令行
python3 main.py --xhs-cli

# 启动账号管理
python3 main.py --account

# 跳过依赖检查
python3 main.py --xhs-gui --no-check
```

### 方式 3: 直接运行脚本

```bash
# 小红书监控 GUI
python3 run_xhs_monitor_gui.py

# 账号管理
python3 xhs_account_manager.py list
```

---

## 功能说明

### 1. 通用网站内容提取器 (GUI)

**启动**: 选项 1 或 `python3 main.py --gui`

**使用流程**:
1. 输入要提取的 URL
2. 选择提取模式 (文本/多模态)
3. 点击"提取内容"
4. 查看结果并导出

**支持网站**:
- 新闻网站
- 博客文章
- 论坛帖子
- 电商平台
- 社交媒体

### 2. 小红书监控器 (GUI)

**启动**: 选项 2 或 `python3 main.py --xhs-gui`

**使用流程**:
1. 添加小红书账号 (首次使用)
2. 输入监控关键词
3. 选择时间范围和选项
4. 点击"开始监控"
5. 查看采集结果

**界面布局**:
```
┌─────────────────────────────────────┐
│ 账号配置                            │
│ [选择账号] [刷新] [添加账号]        │
│ ☑ 启用自动轮换                      │
├─────────────────────────────────────┤
│ 搜索配置                            │
│ 关键词：[输入框]                    │
│ 时间范围：[下拉框]                  │
│ ☑ 提取评论  ☐ 无头模式              │
├─────────────────────────────────────┤
│ [开始监控] [停止监控] [清空日志]    │
├─────────────────────────────────────┤
│ 运行状态                            │
│ 已处理：0  帖子：0  评论：0         │
├─────────────────────────────────────┤
│ 运行日志                            │
│ [实时显示]                          │
└─────────────────────────────────────┘
```

### 3. 小红书账号管理 (命令行)

**启动**: 选项 3 或 `python3 main.py --account`

**常用命令**:
```bash
# 添加账号
python3 xhs_account_manager.py add

# 列出账号
python3 xhs_account_manager.py list

# 查看状态
python3 xhs_account_manager.py status

# 删除账号
python3 xhs_account_manager.py remove
```

### 4. 小红书监控器 (命令行)

**启动**: 选项 4 或 `python3 main.py --xhs-cli`

**使用流程**:
1. 首次运行会提示添加账号
2. 配置搜索参数
3. 自动执行监控任务
4. 结果保存到文件

---

## 配置说明

### 小红书监控配置

**关键词配置**:
```
每行一个关键词，示例:
GEO 优化
AI 搜索排名
品牌获客
社交媒体营销
```

**时间范围选项**:
| 选项 | 说明 |
|-----|------|
| 最近 1 天 | 过去 24 小时的内容 |
| 最近 3 天 | 过去 72 小时的内容 |
| 最近 1 周 | 过去 7 天的内容 (推荐) |
| 最近 2 周 | 过去 14 天的内容 |
| 最近 1 个月 | 过去 30 天的内容 |

**高级选项**:
| 选项 | 说明 | 推荐 |
|-----|------|------|
| 每关键词最大帖子数 | 每个关键词最多采集的帖子数 | 30-50 |
| 提取评论 | 是否采集帖子评论 | ✅ 勾选 |
| 无头模式 | 后台运行，不显示浏览器 | ❌ 不勾选 |

### 账号轮换配置

**轮换策略**:
- 自动选择使用次数最少的账号
- 跳过 1 小时内使用过的账号
- 跳过连续失败 3 次以上的账号
- 跳过被封禁/受限的账号

**使用建议**:
| 账号数量 | 建议 |
|---------|------|
| 1 个 | 每天最多 2-3 小时 |
| 2-3 个 | 轮换使用，每个每天 1 小时 |
| 4+ 个 | 完全自动轮换 |

---

## 数据导出

### 导出格式

**JSON 格式** (完整数据):
```json
{
  "posts": [
    {
      "id": "xhs_1708156800_001",
      "title": "标题",
      "author_nickname": "作者",
      "url": "https://www.xiaohongshu.com/explore/...",
      "timestamp": "2026-02-17",
      "like_count": 100
    }
  ],
  "comments": [...],
  "stats": {...}
}
```

**CSV 格式** (表格数据):
```csv
id,title,author_nickname,url,timestamp,like_count
xhs_1708156800_001，标题，作者，https://...,2026-02-17,100
```

### 导出位置

```
xhs_browser_data/
├── monitor_result_YYYYMMDD_HHMMSS.json
├── export_posts_YYYYMMDD_HHMMSS.csv
├── export_comments_YYYYMMDD_HHMMSS.csv
└── posts/
    └── posts_关键词_YYYYMMDD_HHMMSS.json
```

---

## 常见问题

### Q1: 提示缺少依赖包？

**A**: 运行以下命令安装:
```bash
pip3 install -r requirements.txt
```

### Q2: tkinter 导入错误？

**A**: 需要单独安装 tkinter:
- macOS: `brew install python-tk`
- Ubuntu: `sudo apt-get install python3-tk`
- CentOS: `sudo yum install python3-tkinter`

### Q3: 首次使用如何添加账号？

**A**: 
1. 启动小红书监控 GUI (选项 2)
2. 点击"添加账号"按钮
3. 输入账号密码
4. 保存后会生成主密码 (请妥善保管)

### Q4: 自动登录失败？

**A**: 
- 第一次需要手动登录一次
- 登录状态会被保存
- 后续会自动使用保存的状态
- 如状态失效会再次提示手动登录

### Q5: 如何切换账号？

**A**:
1. 在 GUI 的账号下拉框选择其他账号
2. 或选择"自动轮换"让系统自动选择

### Q6: 监控任务如何停止？

**A**:
- GUI: 点击"停止监控"按钮
- 命令行: 按 `Ctrl+C`

### Q7: 结果文件在哪里？

**A**:
- 点击 GUI 的"打开结果目录"按钮
- 或查看 `xhs_browser_data` 目录

### Q8: 账号被限制了怎么办？

**A**:
1. 暂停使用该账号 24-48 小时
2. 手动登录账号，正常浏览
3. 进行一些真人互动 (点赞、收藏)
4. 之后状态会自动恢复

---

## 快捷键

### 通用快捷键

| 快捷键 | 功能 |
|-------|------|
| `Ctrl+C` | 中断程序 |
| `Ctrl+Q` | 退出 GUI |
| `F1` | 显示帮助 |

### GUI 快捷键

| 快捷键 | 功能 |
|-------|------|
| `Ctrl+N` | 添加账号 |
| `Ctrl+S` | 开始监控 |
| `Ctrl+K` | 停止监控 |
| `Ctrl+L` | 清空日志 |
| `Ctrl+O` | 打开结果目录 |

---

## 技术支持

### 查看日志

**GUI 日志**: 界面下方实时显示

**文件日志**: `xhs_browser_data/logs/`

### 调试模式

```bash
# 设置环境变量启用调试
export XHS_DEBUG=1
python3 main.py --xhs-gui
```

### 反馈问题

请提供以下信息:
1. 错误日志 (从界面或日志文件复制)
2. 操作步骤 (如何复现)
3. 系统信息 (操作系统、Python 版本)

---

## 更新日志

### v2.0 (2026-02-17)

**新增**:
- ✅ 统一启动入口 (main.py)
- ✅ 小红书监控器 GUI
- ✅ 多账号管理和轮换
- ✅ 自动登录功能
- ✅ AES-256 密码加密
- ✅ 命令行参数支持

**优化**:
- ✅ 改进用户界面
- ✅ 增强错误处理
- ✅ 优化账号轮换算法

### v1.0

- 基础网站内容提取功能
- 通用 GUI 界面

---

**文档版本**: v2.0  
**更新时间**: 2026-02-17  
**相关文档**: GUI_README.md, QUICKSTART_GUI.md, ACCOUNT_MANAGER_README.md
